import{ClientOnly as m}from"@vuepress/client";import{useStorage as I}from"@vueuse/core";import{defineComponent as y,ref as s,watch as g,h as n}from"vue";import"../styles/code-tabs.scss";const i=I("VUEPRESS_CODE_TAB_STORE",{});var h=y({name:"CodeTabs",props:{active:{type:Number,default:0},data:{type:Array,required:!0},tabId:{type:String,default:""}},setup(t,{slots:o}){const l=s((()=>{if(t.tabId){const e=t.data.findIndex(({title:a,value:u=a})=>i.value[t.tabId]===u);if(e!==-1)return e}return t.active})()),r=s([]),c=()=>{if(t.tabId){const{title:e,value:a=e}=t.data[l.value];i.value[t.tabId]=a}},f=(e=l.value)=>{l.value=e<r.value.length-1?e+1:0,r.value[l.value].focus()},b=(e=l.value)=>{l.value=e>0?e-1:r.value.length-1,r.value[l.value].focus()},p=(e,a)=>{if(e.key===" "||e.key==="Enter"?(e.preventDefault(),l.value=a):e.key==="ArrowRight"?(e.preventDefault(),f()):e.key==="ArrowLeft"&&(e.preventDefault(),b()),t.tabId){const{title:u,value:v=u}=t.data[l.value];i.value[t.tabId]=v}};return g(()=>i.value[t.tabId],(e,a)=>{if(t.tabId&&e!==a){const u=t.data.findIndex(({title:v,value:d=v})=>d===e);u!==-1&&(l.value=u)}}),()=>n(m,()=>t.data.length?n("div",{class:"code-tabs"},[n("div",{class:"code-tabs-nav"},t.data.map(({title:e},a)=>{const u=a===l.value;return n("button",{ref:v=>{v&&(r.value[a]=v)},class:["code-tabs-nav-tab",{active:u}],"aria-pressed":u,"aria-expanded":u,onClick:()=>{l.value=a,c()},onKeydown:v=>p(v,a)},e)})),t.data.map(({title:e,value:a=e},u)=>{var v;const d=u===l.value;return n("div",{class:["code-tab",{active:d}],"aria-selected":d},(v=o[`tab${u}`])==null?void 0:v.call(o,{title:e,value:a,isActive:d}))})]):null)}});export{h as default};
//# sourceMappingURL=CodeTabs.js.map
